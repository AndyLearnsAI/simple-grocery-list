 │ Migration Plan: OpenAI → Gemini 2.5 Flash Live with Real-Time Voice                                                                                                                                                      │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Current State Analysis                                                                                                                                                                                                   │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Current: OpenAI-based voice assistant using batch processing (record → transcribe → parse → respond)                                                                                                                   │ │
│ │ - Target: Gemini 2.5 Flash Live with real-time bidirectional voice conversation + existing web actions                                                                                                                   │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Phase 1: Dependencies & Environment Setup                                                                                                                                                                                │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Replace openai package with @google/generative-ai                                                                                                                                                                      │ │
│ │ - Add GEMINI_API_KEY environment variable                                                                                                                                                                                │ │
│ │ - Update package.json dependencies                                                                                                                                                                                       │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Phase 2: Backend API Migration                                                                                                                                                                                           │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Migrate /api/voice-intent.ts from OpenAI to Gemini Live API                                                                                                                                                            │ │
│ │ - Implement WebSocket connection for real-time streaming                                                                                                                                                                 │ │
│ │ - Convert function calling schema while preserving existing ParsedPlan structure                                                                                                                                         │ │
│ │ - Maintain same output format for seamless frontend integration                                                                                                                                                          │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Phase 3: Real-Time Audio Infrastructure                                                                                                                                                                                  │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Create new useGeminiLiveSession hook for WebSocket management                                                                                                                                                          │ │
│ │ - Implement continuous audio streaming (16kHz PCM input, 24kHz output)                                                                                                                                                   │ │
│ │ - Add voice activity detection and interruption handling                                                                                                                                                                 │ │
│ │ - Create audio format conversion utilities                                                                                                                                                                               │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Phase 4: Enhanced VoiceAssistant Component                                                                                                                                                                               │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Upgrade to real-time conversation UI with live audio feedback                                                                                                                                                          │ │
│ │ - Implement bidirectional streaming: live voice input/output                                                                                                                                                             │ │
│ │ - Add real-time transcription display                                                                                                                                                                                    │ │
│ │ - Preserve existing approval workflow for grocery list actions                                                                                                                                                           │ │
│ │ - Maintain same executePlan() function and React methods                                                                                                                                                                 │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Phase 5: Function Calling Integration                                                                                                                                                                                    │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Define grocery list functions for Gemini Live API                                                                                                                                                                      │ │
│ │ - Implement generate_grocery_plan function that outputs existing ParsedPlan format                                                                                                                                       │ │
│ │ - Enable real-time conversation with structured action generation                                                                                                                                                        │ │
│ │ - Preserve user approval step before executing actions                                                                                                                                                                   │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Key Benefits                                                                                                                                                                                                             │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Real-time conversation: Natural, flowing dialog with immediate responses                                                                                                                                               │ │
│ │ - Existing actions preserved: All current grocery list functionality unchanged                                                                                                                                           │ │
│ │ - User control maintained: Same approval workflow for modifications                                                                                                                                                      │ │
│ │ - Enhanced UX: Live voice responses + visual feedback                                                                                                                                                                    │ │
│ │ - Future-ready: Foundation for multimodal capabilities                                                                                                                                                                   │ │
│ │                                                                                                                                                                                                                          │ │
│ │ Technical Architecture                                                                                                                                                                                                   │ │
│ │                                                                                                                                                                                                                          │ │
│ │ - Conversation Layer: Real-time WebSocket audio streaming                                                                                                                                                                │ │
│ │ - Action Layer: Function calling → existing React methods                                                                                                                                                                │ │
│ │ - UI Layer: Enhanced real-time interface + preserved approval dialogs        